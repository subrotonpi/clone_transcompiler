def main ( ) :
    import os
    import sys
    import getopt
    class GCJ_B ( object ) :
        def __init__ ( self ) :
            sc = open ( 'input.txt' , 'r' )
            f = open ( 'output.txt' , 'w' )
            self.caseCnt = len ( cur )
            for i in range ( self.caseCnt ) :
                if i >= 1 :
                    f.write ( ', ' )
            f.write ( ']' )
    def main ( ) :
        GCJ_B ( ).do_it ( )
    def go ( ) :
        for i in range ( self.caseCnt ) :
            if i >= 1 :
                f.write ( ', ' )
            else :
                f.write ( ', ' )
    def go ( ) :
        for i in range ( self.caseCnt ) :
            if i >= 1 :
                f.write ( ', ' )
            else :
                f.write ( ', ' )
    combCnt = go ( )
    combCnt = go ( )
    is_comb = [ [ ] for i in combCnt ]
    comb = [ [ ] for i in combCnt ]
    for s in combCnt :
        is_comb [ s [ 0 ] - 'A' ] [ s [ 1 ] - 'A' ] = True
        is_comb [ s [ 1 ] - 'A' ] [ s [ 0 ] - 'A' ] = True
        comb [ s [ 1 ] - 'A' ] [ s [ 0 ] - 'A' ] = s [ 2 ]
    oppCnt = go ( )
    is_opp = [ [ ] for i in oppCnt ]
    for s in combCnt :
        is_opp [ s [ 0 ] - 'A' ] [ s [ 1 ] - 'A' ] = True
        is_opp [ s [ 1 ] - 'A' ] [ s [ 0 ] - 'A' ] = True
    N = len ( cur )
    s = go ( )
    cur = [ ]
    for c in s :
        cur.append ( c )
        if len ( cur ) > 1 :
            p = cur [ - 2 ]
            if is_comb